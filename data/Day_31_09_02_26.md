
**Protocol writer:**<br> 
Munzer Al Awad

---

## Introduction
The day started with the daily protocol, followed by exercises from the previous lesson.  
We then focused on SQL filtering using conditional logic, and later moved to data aggregation and mathematical functions.  
All examples were practiced using datasets introduced in previous lessons.

---

## Schedule
| Time | Notes |
|------|-------|
| 09:00 – 09:30 | Daily protocol |
| 09:30 – 10:00 | Exercises from previous lesson |
| 10:00 – 10:10 | Break |
| 10:10 – 11:00 | Filtering based on conditions |
| 11:00 – 11:10 | Break |
| 11:10 – 12:00 | Filtering exercises |
| 12:00 – 13:00 | Lunch break |
| 13:00 – 13:30 | Exercises continuation |
| 13:30 – 14:30 | Aggregation & mathematical functions |
| 14:30         | Aggregation exercises |

---

## SQL Filtering (WHERE)

The `WHERE` clause is used to filter rows and return only records that match specific conditions.



Key concepts:
- Filtering by exact values<br>
Used when matching a column to a specific value.
```sql
WHERE country = 'Iceland'
```

- Numeric comparisons.<br>
Used to filter values based on thresholds.
```sql
WHERE alt >= 12400;
```
- Excluding specific values.<br>
Used to return all except a specific value.<br>
```sql
WHERE country <> 'China';
````
- Filtering Using a List (IN)<br>
Used to match a value from multiple options.<br>
```sql
WHERE country IN ('Canada', 'Tunisia');
````

- Filtering Using a Range (BETWEEN).<br>
Used to filter values within an inclusive range.<br>
```sql
WHERE alt BETWEEN 11001 AND 13355;
````

- Pattern matching.<br>
Used when only part of the text is known.<br>
```sql
WHERE faa LIKE 'Y%';
````
Case-insensitive matching:<br>
```sql
WHERE faa ILIKE 'y_G';
````

- Combining multiple conditions (AND / OR)<br>
Used to build more realistic filters.<br>
```sql
WHERE alt >= 12400 AND (country = 'China' OR country = 'Nepal');
````

- Correct handling of `NULL` values.<br>
NULL must be checked using `IS` and not =.
```sql
WHERE city IS NULL;
WHERE city IS NOT NULL AND country IS NOT NULL;
````

## Data Aggregation
The lecture introduced aggregate functions as a core element of data analytics.

Main ideas:
- Aggregation functions summarize large datasets into single values
- They provide a general overview of the data
- Useful for identifying trends and patterns

Functions covered:
- Minimum and maximum.<br>
Used to find the lowest and highest value in a column.<br>
```sql
SELECT MIN(alt) AS min_alt, MAX(alt) AS max_alt
FROM airports;
````
- Count and distinct count.<br>
Counting Rows:<br>
Counts total number of rows in a table.
```sql
SELECT COUNT(*) 
FROM airports;
````
Counting Unique Values:<br>
Counts unique entries in a column.<br>
```sql
SELECT COUNT(DISTINCT country) 
FROM airports;
````
- Average.<br>
Computes the mean value of a column.<br>
```sql
SELECT AVG(alt) AS average_altitude
FROM airports;
```
- Sum.<br>
Calculates the total sum of a column.<br>
```sql
SELECT SUM(distance) AS total_distance
FROM flights
WHERE flight_date = '2025-01-01';
```

---

## Mathematical Functions
We explored mathematical functions used together with aggregation to refine results and improve interpretation.

Topics included:
- Rounding values<br>
Rounds a numeric value to the specified number of decimals.<br>
```sql
SELECT ROUND(3.456457::NUMERIC, 2);
SELECT ROUND(AVG(air_time), 2) AS avg_air_time_rounded
FROM flights
WHERE origin = 'BOS' AND dest = 'HNL';
```

Rounding down and rounding up<br>
- FLOOR:<br>
Rounds a numeric value down to the nearest integer.<br>
```sql
SELECT FLOOR(AVG(air_time)) AS avg_air_time_floor
FROM flights
WHERE origin = 'BOS' AND dest = 'HNL';
````
- CEILING:<br>
Rounds a numeric value up to the nearest integer.<br>
```sql
SELECT CEILING(AVG(air_time)) AS avg_air_time_ceiling
FROM flights
WHERE origin = 'BOS' AND dest = 'HNL';
```

# Differences between integer and decimal division<br>

- Integer Division:<br>
Divides integers and truncates the result toward zero.<br>
```sql
SELECT 5 / 2; -- yields 2
SELECT (-5) / 2; -- yields -2
SELECT 5 * 1.0 / 2-- yields 2.5
````
- Division with Decimals:<br>

```sql
SELECT 10.5 / 2.5; -- yields 4.2
````
- Modulo:<br>
Calculates the remainder of a division.<br>
```sql
SELECT 7 % 3; -- yields 1
```

- Total Airtime Example<br>
Convert total minutes into days, hours, and minutes.<br>
```sql
SELECT SUM(air_time) / 60 / 24 AS days,
       SUM(air_time) / 60 % 24 AS hours,
       SUM(air_time) % 60 AS minutes
FROM flights
WHERE flight_date = '2025-01-01';
```

- Practical calculations involving time and distance<br>
Filter airports for countries China or Nepal with altitude ≥ 12400, and convert to meters & kilometers.<br>
```sql
SELECT name, city, country,
       alt AS altitude_in_feet,
       ROUND(alt/3.281, 2) AS altitude_in_m,
       ROUND((alt/3.281)/1000.0, 3) AS altitude_in_km
FROM airports
WHERE alt >= 12400
  AND (country = 'China' OR country = 'Nepal');
```


---


## Summary
This session focused on strengthening essential SQL skills for data analysis:
- Filtering data efficiently with `WHERE`
- Summarizing data using aggregation functions
- Applying mathematical operations to aggregated results
- Reinforcing understanding through practice
